<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Flash Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body>
    <%- include('./partials/navbar') %>
    
    <div class="dashboard-container">
        <% if(typeof success_msg !== 'undefined' && success_msg.length > 0){ %>
            <div class="alert alert-success animate-fade-in"><%= success_msg %></div>
        <% } %>
        
        <% if(typeof error_msg !== 'undefined' && error_msg.length > 0){ %>
            <div class="alert alert-danger animate-fade-in"><%= error_msg %></div>
        <% } %>

        <div class="welcome-section glass-card animate-fade-in">
            <h1>Welcome <%= user ? user.username : 'User' %></h1>
            <p class="lead">
                <% if (user && user.role === 'teacher') { %>
                    Manage your quizzes and monitor student progress.
                <% } else { %>
                    Take quizzes and track your learning progress.
                <% } %>
            </p>
        </div>

        <div class="dashboard-cards">
            <% if (user.role === 'teacher') { %>
                <div class="glass-card dashboard-card animate-fade-in">
                    <i class="fas fa-book-open card-icon"></i>
                    <h5>My Quizzes</h5>
                    <p>Create and manage your quizzes.</p>
                    <a href="/quizzes" class="btn dashboard-btn">Manage Quizzes</a>
                </div>
                <div class="glass-card dashboard-card animate-fade-in">
                    <i class="fas fa-chart-bar card-icon"></i>
                    <h5>Student Results</h5>
                    <p>View student attempts and scores.</p>
                    <a href="/attempts/results" class="btn dashboard-btn">View Results</a>
                </div>
                <div class="glass-card dashboard-card animate-fade-in">
                    <i class="fas fa-trophy card-icon"></i>
                    <h5>Leaderboard</h5>
                    <p>View top performing students across all quizzes.</p>
                    <a href="/attempts/leaderboard" class="btn dashboard-btn">View Leaderboard</a>
                </div>
            <% } else { %>
                <div class="glass-card dashboard-card animate-fade-in">
                    <i class="fas fa-pencil-alt card-icon"></i>
                    <h5>Available Quizzes</h5>
                    <p>Browse and attempt quizzes created by teachers and students.</p>
                    <a href="/quizzes" class="btn dashboard-btn">Take a Quiz</a>
                </div>
                <div class="glass-card dashboard-card animate-fade-in">
                    <i class="fas fa-plus-circle card-icon"></i>
                    <h5>Make Your Own Quiz</h5>
                    <p>Create and share your own quizzes with others.</p>
                    <a href="/quizzes/new" class="btn dashboard-btn">Create Quiz</a>
                </div>
                <div class="glass-card dashboard-card animate-fade-in">
                    <i class="fas fa-trophy card-icon"></i>
                    <h5>Leaderboard</h5>
                    <p>See how you rank among other students.</p>
                    <a href="/attempts/leaderboard" class="btn dashboard-btn">View Rankings</a>
                </div>
            <% } %>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
